<h3> Enter Details </h3>

<%= form_with model: @reservation , url: reservations_path, method: :post do |form| %>
 <% unique_token = SecureRandom.hex(10) %>  <!-- Generate unique token -->
  <%= hidden_field_tag :submission_token, unique_token %>

  <div class="form-group">
    <%= form.label :passenger_name ,'Passenger Name :' %>
    <%= form.text_field :passenger_name %>
  </div>

  <div class="form-group">
    <%= form.label :date_of_birth, 'DOB' %>
    <%= form.date_field :date_of_birth, required: true %>
  </div>

  <div class="form-group">
    <%= form.label :gender, 'Gender' %>
    <%= form.select :gender, ['Female', 'Male', 'Others'] %>
  </div>

  <div class="form-group">
    <%= form.label :berth_class, 'Class' %>
    <%= form.select :berth_class, ['1AC', '2AC','General'] %>
  </div>

  <div class="form-group">
    <%= form.label :email, 'Email ID' %>
    <%= form.email_field :email %>
  </div>

  <div class="form-group">
    <%= form.label :phone_number, 'Phone Number' %>
    <%= form.telephone_field :phone_number %>
  </div>

    <%= form.hidden_field :available_id, value: params[:available_id]%>
    <%= form.hidden_field :date , value: params[:date] %>
    <%= form.hidden_field :train_detail_id, value: params[:train_detail_id]%>
    <%= form.hidden_field :age, value: 0 %>
    
   <% unless session[:submission_token] == unique_token %>
    <%= form.submit 'Submit' %>
  <% else %>
    <p>You have already submitted this form.</p>
  <% end %>
<% end %>
